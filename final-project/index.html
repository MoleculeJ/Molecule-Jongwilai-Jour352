<!doctype html>
<html lang="en">
    <head>
        <title>international-students-cns</title>

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

        <!--Twitter -->
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@cnsmaryland" />
        <meta name="twitter:title" content="International Students Crackdown" />
        <meta name="twitter:description" content="Threats to F-1 visas have created an unsettling sentiment among international students, while the number of enrollments declined significantly in fall 2025." />
        <meta name="twitter:creator" content="@cnsmaryland" />
        <meta
            name="twitter:image"
            content="https://cnsmaryland.org/wp-content/uploads/2025/12/umd.jpg" />

        <!--Facebook OpenGraph-->
        <meta property="og:title" content="International Students Crackdown" />
        <meta property="og:type" content="article" />
        <meta property="og:url" content="http://cnsmaryland.org/interactives/spring-2018/plea-bargain/index.html" />
        <meta property="og:description" content="Threats to F-1 visas have created an unsettling sentiment among international students, while the number of enrollments declined significantly in fall 2025." />
        <meta
            property="og:image"
            content="https://cnsmaryland.org/wp-content/uploads/2025/12/umd.jpg" />
        <meta property="og:site_name" content="CNS Maryland" />
        <meta property="fb:app_id" content="209502139105366" />

        <!-- METRICS -->
        <meta name="parsely-title" content="Add title" />
        <meta name="parsely-link" content="Add link" />
        <meta name="parsely-type" content="post" />
        <meta name="parsely-pub-date" content="Add date" />
        <meta name="parsely-section" content="Investigations" />
        <meta name="parsely-author" content="CNS Maryland" />
        <meta name="parsely-tags" content="crime, investigative journalism, interactives" />

        <!-- font -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&display=swap"
            rel="stylesheet" />

        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
            crossorigin="anonymous" />

        <link href="style.css" rel="stylesheet" />
    </head>

    <body>
        <section class="topper">
            <div class="navbar">
                <a class="navbar-brand" href="http://cnsmaryland.org/" target="_blank">
                    <img src="logo.png" id="logo" />
                </a>
            </div>
            <div class="topper-content">
                <h1 id="headline">Crackdown on international students continues<br />with threats on F-1 visas</h1>
                <p id="disclaimer">
                    This scrolly-telling story is best experienced on a desktop or widescreen display.
                </p>
            </div>
        </section>

        <section class="section1">
            <p id="caption1">COLLEGE PARK - The M circle, University of Maryland, College Park's campus (Molecule Jongwilai/Capital News Service)</p>
            <p id="byline">
                <b>Story by Sophia da Silva</b><br /><b>Data and Web Design by Molecule Jongwilai</b><br />Published Dec
                5, 2024
            </p>
            <p>
                <b>WASHINGTON</b> - A <b>researcher</b> at the University of Maryland lost her job last summer. She’s
                from Colombia and was here on a <b>student</b> visa extension and not having a job means she’ll have to
                go back.
            </p>
            <p>
                Her lab lost federal funding earlier this year and couldn’t afford to keep her on. No longer being
                associated with the university, she was left without housing, without health insurance and without
                important information from International Student and Scholars Services. 
            </p>
            <p>
                “The issue here with these funding cuts is, it's not only that your research is done, it's that your
                immigration status is also affected,” she told Capital News Service.
            </p>
            <p>She asked CNS not to identify her for fear of being targeted.</p>
            <p>
                Her story isn’t unique. This year the Trump administration launched a crackdown on international
                students including
                <a href="https://www.bbc.com/news/articles/c20xq5nd8jeo" target="_blank">deportations</a>,
                <a href="https://www.bbc.com/news/articles/cz93vznxd07o" target="_blank">visa revocations</a>,
                <a
                    href="https://www.politico.com/news/2025/05/27/trump-team-orders-stop-to-new-student-visa-interviews-as-it-weighs-expanding-social-media-vetting-00370501"
                    target="_blank"
                    >interview pauses</a
                >
                and
                <a
                    href="https://www.npr.org/2025/06/09/nx-s1-5427998/trump-travel-ban-countries-immigration-enforcement"
                    target="_blank"
                    >travel bans</a
                >. Recently
                <a href="https://www.regulations.gov/document/ICEB-2025-0001-0001" target="_blank">proposed changes</a>
                to F-1 visas threaten to make international students even more vulnerable.
            </p>
            <p>“This is not the U.S. that <b>[it was]</b> when I came here,” she said.</p>
            <p>
                F-1 visas – the visa most students come to the United States under – allows students to stay in the
                United States under  <a href="https://www.nafsa.org/Duration-status-explainer" target="_blank"
                    >“duration of status”</a
                >; visa holders are allowed to stay in the U.S. as long as they are making normal progress on their
                research or academic programs.
            </p>
            <p>
                A new policy, proposed by the Department of Homeland Security in August, would eliminate duration of
                status and give students a maximum of four years before applying for another visa known as an “extension
                of stay.”
            </p>
            <p>
                “Imagine doing four years of your degree and then being told, ‘no, you actually have to go back and try
                to reapply for a visa’,” said University of Maryland Graduate Labor Union organizer Rose Ying.
            </p>
            <p>
                Applications for extension of stay visas are costly to students including processing and legal fees and
                subject to backlogs, according to the University of Maryland’s
                <a href="https://www.regulations.gov/comment/ICEB-2025-0001-21530" target="_blank">comment</a> opposing
                the proposal. This is all without guarantee that extension will be granted.
            </p>
            <p>
                The Trump administration argued that its new policy is necessary to counter “student visa abuse”.  The
                University of Maryland said in its comment that getting rid of duration of status only puts more work
                onto U.S. Citizenship and immigration Services, resulting in even more backlogs
            </p>
            <p>
                Universities have already seen a decline in foreign student enrollment as a result of new visa policies.
                The International Trade Administration reported a 19.1% in F-1 arrivals this August.
            </p>
        </section>

        <section class="section2">
            <div class="card1">
                <p>
                    <b
                        >Maryland as a whole has started to see a decline in international<br />student enrollment,
                        especially in the fall semester</b
                    >
                </p>

                <div class="chart-wrapper">
                    <img src="chart1.png" id="chart1" />
                    <canvas id="drawLayer"></canvas>
                    <!-- Answer image -->
                    <img src="chart1-answer.png" id="chart1-answer" class="hidden" />
                </div>

                <p id="chart1-caption">
                    Do you want to guess how number went down in fall 2025?<br />Feel free the draw the rest of a line
                    chart.
                </p>
                <button id="showAnswerBtn">Or click here for the answer</button>
            </div>

            <div class="card2">
                <p>
                    CNS analysed the data of over 38,000 international students’ enrollment between 2020 and 2025 from
                    five major Maryland public universities–University of Maryland, College Park, University of
                    Maryland, Baltimore County, Towson University, Salisbury University and Frostburg State University
                </p>
                <p>
                    <em
                        >[*This data set represents all international student enrollment, not new international students
                        each year, and the University of Maryland, College Park and Towson University do not disclose
                        the number of students from countries that have fewer than 10 enrollments.]</em
                    >
                </p>
            </div>

            <div class="card3 maryland-card">
                <div class="row">
                    <div class="col-12">
                        <p>
                            Some universities, including the University of Maryland, College Park, and the University of
                            Maryland, Baltimore County, which account for approximately 90% of international students in
                            this dataset, showed a significant decline in enrollment for fall 2025.
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <img src="chart-umd.png" class="map-chart" />
                        <p>University of Maryland, College Park</p>
                    </div>
                    <div class="col-sm-6">
                        <img src="chart-umbc.png" class="map-chart" />
                        <p>University of Maryland, Baltimore County</p>
                    </div>
                </div>
            </div>

            <div class="card4 maryland-card">
                <div class="row">
                    <div class="col-12">
                        <p>
                            Other universities, such as Salisbury University and Frostburg State University, actually
                            showed an increase in enrollment at a slower pace.
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <img src="chart-salis.png" class="map-chart" />
                        <p>Salisbury University</p>
                    </div>
                    <div class="col-sm-6">
                        <img src="chart-frostburg.png" class="map-chart" />
                        <p>Frostburg State University</p>
                    </div>
                </div>
            </div>

            <div class="card5 continent-card">
                <div class="row">
                    <div class="col-12">
                        <p>Student enrollment from each continent illustrated the common trend.</p>
                        <p>
                            The number of Asian students decreased from fall 2023 to fall 2024,<br />and had a larger
                            drop in fall 2025.
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <img src="chart-asia.png" class="map-chart map-continent" />
                    </div>
                </div>
            </div>

            <div class="card6 continent-card">
                <div class="row">
                    <div class="col-12">
                        <p>
                            While the number of students from most Asian countries, including India, declined, the
                            number of students from a few countries, like China, increased.
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <img src="chart-india.png" class="map-chart" />
                        <p>India</p>
                    </div>
                    <div class="col-sm-6">
                        <img src="chart-china.png" class="map-chart" />
                        <p>China</p>
                    </div>
                </div>
            </div>

            <div class="card7 continent-card">
                <div class="row">
                    <div class="col-12">
                        <p>
                            European students’ enrollment had been increasing since 2020, with a small drop in fall
                            2023, followed by a larger decline in fall 2025.
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <img src="chart-eu.png" class="map-chart map-continent" />
                    </div>
                </div>
            </div>

            <div class="card8 continent-card">
                <div class="row">
                    <div class="col-12">
                        <p>
                            Most European countries followed this trend, except for a few, such as Spain, where the
                            number continued to grow.
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <img src="chart-germany.png" class="map-chart" />
                        <p>Germany</p>
                    </div>
                    <div class="col-sm-6">
                        <img src="chart-spain.png" class="map-chart" />
                        <p>Spain</p>
                    </div>
                </div>
            </div>

            <div class="card9 continent-card">
                <div class="row">
                    <div class="col-12">
                        <p>
                            The enrollment of foreign students from North and South America also saw a significant
                            decline in fall 2025.
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <img src="chart-america.png" class="map-chart map-continent" />
                    </div>
                </div>
            </div>

            <div class="card10 continent-card">
                <div class="row">
                    <div class="col-12">
                        <p>
                            Most countries in the continent followed this pattern, except for a few, such as El
                            Salvador, where the number of students slightly increased.
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <img src="chart-canada.png" class="map-chart" />
                        <p>Canada</p>
                    </div>
                    <div class="col-sm-6">
                        <img src="chart-elsalvador.png" class="map-chart" />
                        <p>El Salvador</p>
                    </div>
                </div>
            </div>

            <div class="card11 continent-card">
                <div class="row">
                    <div class="col-12">
                        <p>African students’ enrollment dropped for the first time in six years,</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <img src="chart-africa.png" class="map-chart map-continent" />
                    </div>
                </div>
            </div>

            <div class="card12 continent-card">
                <div class="row">
                    <div class="col-12">
                        <p>
                            including students from Nigeria and Ghana, who accounted for the majority of international
                            African students in the data.
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <img src="chart-nigeria.png" class="map-chart" />
                        <p>Nigeria</p>
                    </div>
                    <div class="col-sm-6">
                        <img src="chart-ghana.png" class="map-chart" />
                        <p>Ghana</p>
                    </div>
                </div>
            </div>

            <div class="card13">
                <p>
                    <b>The number of internationl students from most countries decreased in fall 2025.</b><br>
                    Click on a bubble for more details<br>
                    <span style="font-size: 0.65em; font-style: italic;">This chart includes only countries with student enrollment of 10 or more in fall 2024 and fall 2025 for sensible comparability.</span>
                </p>
                <div id="bubble-container"></div>
            </div>
        </section>
        <div
            id="tooltip"
            style="
                position: absolute;
                padding: 6px 10px;
                background: rgba(0, 0, 0, 0.8);
                color: #fff;
                font-family: &quot;poppins&quot;;
                font-size: 13px;
                border-radius: 7px;
                pointer-events: none;
                opacity: 0;
                transition: opacity 0.05s;
            "></div>

        <section class="section3">
            <p>
                Most international students in the United States are graduate students. Many come here for research
                institutions that have far more resources than their foreign counterparts. That’s why the
                <b>researcher</b>
                from Colombia said she came here four years ago as a master’s student. 
            </p>
            <p>She was working in Colombia for a non-governmental organization and needed some data for a project. </p>
            <p>
                “My supervisor at the time, she said, ‘oh, check this website, this lab’... And I was like, oh, ok,
                that's so cool that they have the entire world, and it's free,” she said. 
            </p>
            <p style="margin-bottom: 35px">
                She was impressed and when she got her acceptance letter, she said she was excited to be part of that
                impressive work. In addition to research and academics, she got life experiences she wouldn’t have
                otherwise. 
            </p>
            <hr />
            <p style="color: #c71e1d; font-size: 30px">
                "What are the chances besides the university or through the university that I would meet a girl from a
                small city in China. I have never been in China. She has never been in Colombia,"
                <span style="font-size: 18px">Columbian researcher said.</span>
            </p>
            <hr />
            <p style="margin-top: 35px">
                She’d begun to build a life here and hadn’t thought that four years later she’d have to leave the way
                she did; <b>with</b> just a couple months to wrap up her life.
            </p>
            <p>
                She finished her <b>master’s degree at the University of Maryland in 2022</b> and started what is known
                as optional practical training – a kind of F-1 extension that allows students to work in their field
                after graduation – when she started working <b>at the university</b>. She was supposed to have another
                five months to work on research, to make money and figure out her next move. 
            </p>
            <p>
                “I'm still processing like, okay, this is over. And even like all the things that I have, collecting and
                buying over these four years, now I just feel like I have one month to get rid of them,” she said. 
            </p>
            <p>
                <b>Her official title was faculty specialist</b>. Her job included developing curriculum, supervising
                graduate students, supporting and conducting research that now has to stop.
            </p>
            <p style="margin-bottom: 35px">
                “I don't think I would have the equipment. I don't have the data. I don't have the computer power to run
                those processes. So I think that research, that project died. It's over,” she said. 
            </p>
            <img src="picmock20.png" />
            <p id="caption2">Caption go here....</p>
            <p style="margin-top: 35px">
                Having a hard deadline for F-1 visas means lost momentum for a lot of international students, especially
                for doctorate degrees, which – according to the National Center for Science and Engineering Statistics –
                take a median of 5.7 years to complete.
            </p>
            <p>
                In its comment against the administration’s visa proposal, the University of Maryland said the new
                policy takes discretionary power away from universities, an argument Georgetown University
                <a href="https://georgetown.app.box.com/s/mac1jso91iahiyaobdlrfblshurgi4bo" target="_blank"
                    >reiterated</a
                >
                in its comment.
            </p>
            <p>
                “The ability of PhD students to complete their studies will be in the hands of (U.S. Citizenship and
                Immigration Services) and not their higher education institution,” wrote Susan Dougherty, the University
                of Maryland’s director of International Students and Scholars Services. 
            </p>
            <p>
                With less time on their visas, international students said they have felt pressured to rush their
                degrees <b>which</b> can have serious consequences for a career in their chosen field.
            </p>
            <p>
                “ If you rush to finish your PhD then it's possible that like you didn't get to publish (research) while
                you were doing your PhD. And not being able to publish your PhD work while you're doing your PhD usually
                means that it's a lot harder for you to publish afterwards,” said a <b>fourth-year</b> doctoral student
                <b>at the University of Maryland</b>, also on a foreign student visa. She asked not to be identified. 
            </p>
            <p>
                This doesn’t just affect doctoral students. The National Center for Educational Statistics says the
                median time to complete a bachelor’s degree is 4.3 years. Dual majors and joint undergraduate-graduate
                programs can take even longer. 
            </p>
            <p style="margin-bottom: 35px">
                The administration’s proposed policy would also prohibit students from changing educational objectives,
                including transferring or changing a field of study. The University of Maryland said that this shows a
                misunderstanding of graduate education where students often shift focus, move labs or move with advisors
                as their education progresses.  
            </p>
            <img src="pic2.jpg" />
            <p id="caption3">COLLEGE PARK - International Student and Scholar Services office, University of Maryland, College Park (Molecule Jongwilai/Capital News Service).</p>
            <p style="margin-top: 35px">
                “There's already situations on campus where labs are kind of toxic environments for one reason or
                another, and switching labs has saved people's careers,” said Ying, who is currently a sixth-year
                doctoral candidate at Maryland.
            </p>
            <p>
                Universities worry that these constraints take away the flexibility that make the U.S. so attractive to
                international students. While these changes to F-1 visas have not been implemented yet, many other
                policies affecting international students have.
            </p>
            <p>
                The American Association of University Women sponsors around 60 women to study in the United States. The
                organization encountered issues this year during a
                <a
                    href="https://www.politico.com/news/2025/05/27/trump-team-orders-stop-to-new-student-visa-interviews-as-it-weighs-expanding-social-media-vetting-00370501"
                    target="_blank"
                    >visa interview pause</a
                >
                <b>imposed by the Trump administration</b> in May.
            </p>
            <p>
                “A number ended up having to defer their fellowship to next year. And many ended up just declining them
                entirely after the delays just continued to cascade and they knew that they didn't have a chance,” said
                AAUW CEO Gloria Blackwell.
            </p>
            <p>
                Blackwell said that even when fellows did arrive at their host universities, their research and studies
                were affected by funding cuts.
            </p>
            <p>
                <b
                    >“I feel like in some way, also, the US is losing some …high qualified professionals,” said the
                    researcher from Colombia.</b
                >
            </p>
            <p style="margin-bottom: 35px">
                <b
                    >She said that international students already have to prove themselves – adapting to a new system,
                    new country, new language – and get important training from the U.S. She said that these new
                    policies are unfair and result in the U.S. losing knowledge from these students.</b
                > 
            </p>
            <hr />
            <p style="color: #c71e1d; font-size: 30px">
                "I didn't grow up here – I didn't – I wasn't born here but I chose to be here,"
                <span style="font-size: 18px">she said.</span>
            </p>
            <hr />
        </section>

        <script>
            // Allow drawing on canvas and make its size match chart 1
            window.addEventListener("load", () => {
                const img = document.getElementById("chart1");
                const canvas = document.getElementById("drawLayer");
                const ctx = canvas.getContext("2d");

                // Size canvas to match the displayed image
                function resizeCanvas() {
                    canvas.width = img.clientWidth;
                    canvas.height = img.clientHeight;
                }

                resizeCanvas();
                window.addEventListener("resize", resizeCanvas);

                let drawing = false;

                canvas.addEventListener("mousedown", (e) => {
                    drawing = true;
                    ctx.beginPath();
                    const rect = canvas.getBoundingClientRect();
                    ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
                });

                canvas.addEventListener("mouseup", () => (drawing = false));
                canvas.addEventListener("mouseleave", () => (drawing = false));

                canvas.addEventListener("mousemove", (e) => {
                    if (!drawing) return;
                    const rect = canvas.getBoundingClientRect();

                    ctx.lineWidth = 3;
                    ctx.lineCap = "round";
                    ctx.strokeStyle = "red";

                    ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
                    ctx.stroke();
                });
            });

            // click the button to show answer picture
            document.getElementById("showAnswerBtn").addEventListener("click", () => {
                // hide original image + drawing canvas
                document.getElementById("chart1").style.display = "none";
                document.getElementById("drawLayer").style.display = "none";

                // show the answer image
                document.getElementById("chart1-answer").classList.remove("hidden");
            });

            // change background from map1 to map2 when scrolling reach card5
            document.addEventListener("DOMContentLoaded", () => {
                const section = document.querySelector(".section2");
                const card5 = document.querySelector(".card5");

                const observer = new IntersectionObserver(
                    (entries) => {
                        entries.forEach((entry) => {
                            if (entry.isIntersecting) {
                                section.classList.add("bg-alt1");
                            } else {
                                section.classList.remove("bg-alt1");
                            }
                        });
                    },
                    {
                        threshold: 0.25 // 25% visible before switching
                    }
                );
                observer.observe(card5);
            });

            // change background from map2 to map3 when scrolling reach card6
            document.addEventListener("DOMContentLoaded", () => {
                const section = document.querySelector(".section2");
                const card5 = document.querySelector(".card6");

                const observer = new IntersectionObserver(
                    (entries) => {
                        entries.forEach((entry) => {
                            if (entry.isIntersecting) {
                                section.classList.add("bg-alt2");
                            } else {
                                section.classList.remove("bg-alt2");
                            }
                        });
                    },
                    {
                        threshold: 0.25 // 25% visible before switching
                    }
                );
                observer.observe(card5);
            });

            // change background from map3 to map4 when scrolling reach card7
            document.addEventListener("DOMContentLoaded", () => {
                const section = document.querySelector(".section2");
                const card5 = document.querySelector(".card7");

                const observer = new IntersectionObserver(
                    (entries) => {
                        entries.forEach((entry) => {
                            if (entry.isIntersecting) {
                                section.classList.add("bg-alt3");
                            } else {
                                section.classList.remove("bg-alt3");
                            }
                        });
                    },
                    {
                        threshold: 0.25 // 25% visible before switching
                    }
                );
                observer.observe(card5);
            });

            // change background from map4 to map5 when scrolling reach card8
            document.addEventListener("DOMContentLoaded", () => {
                const section = document.querySelector(".section2");
                const card5 = document.querySelector(".card8");

                const observer = new IntersectionObserver(
                    (entries) => {
                        entries.forEach((entry) => {
                            if (entry.isIntersecting) {
                                section.classList.add("bg-alt4");
                            } else {
                                section.classList.remove("bg-alt4");
                            }
                        });
                    },
                    {
                        threshold: 0.25 // 25% visible before switching
                    }
                );
                observer.observe(card5);
            });

            // change background from map5 to map6 when scrolling reach card9
            document.addEventListener("DOMContentLoaded", () => {
                const section = document.querySelector(".section2");
                const card5 = document.querySelector(".card9");

                const observer = new IntersectionObserver(
                    (entries) => {
                        entries.forEach((entry) => {
                            if (entry.isIntersecting) {
                                section.classList.add("bg-alt5");
                            } else {
                                section.classList.remove("bg-alt5");
                            }
                        });
                    },
                    {
                        threshold: 0.25 // 25% visible before switching
                    }
                );
                observer.observe(card5);
            });

            // change background from map6 to map7 when scrolling reach card10
            document.addEventListener("DOMContentLoaded", () => {
                const section = document.querySelector(".section2");
                const card5 = document.querySelector(".card10");

                const observer = new IntersectionObserver(
                    (entries) => {
                        entries.forEach((entry) => {
                            if (entry.isIntersecting) {
                                section.classList.add("bg-alt6");
                            } else {
                                section.classList.remove("bg-alt6");
                            }
                        });
                    },
                    {
                        threshold: 0.25 // 25% visible before switching
                    }
                );
                observer.observe(card5);
            });

            // change background from map7 to map8 when scrolling reach card11
            document.addEventListener("DOMContentLoaded", () => {
                const section = document.querySelector(".section2");
                const card5 = document.querySelector(".card11");

                const observer = new IntersectionObserver(
                    (entries) => {
                        entries.forEach((entry) => {
                            if (entry.isIntersecting) {
                                section.classList.add("bg-alt7");
                            } else {
                                section.classList.remove("bg-alt7");
                            }
                        });
                    },
                    {
                        threshold: 0.25 // 25% visible before switching
                    }
                );
                observer.observe(card5);
            });

            // change background from map8 to map9 when scrolling reach card12
            document.addEventListener("DOMContentLoaded", () => {
                const section = document.querySelector(".section2");
                const card5 = document.querySelector(".card12");

                const observer = new IntersectionObserver(
                    (entries) => {
                        entries.forEach((entry) => {
                            if (entry.isIntersecting) {
                                section.classList.add("bg-alt8");
                            } else {
                                section.classList.remove("bg-alt8");
                            }
                        });
                    },
                    {
                        threshold: 0.25 // 25% visible before switching
                    }
                );
                observer.observe(card5);
            });
        </script>

        <script src="https://d3js.org/d3.v7.min.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                // ---------------- DATA ----------------
                const data = [
                    { country: "Bangladesh", value: 2.14, r: 4, fall24: 187, fall25: 191 },
                    { country: "Brazil", value: -2.56, r: 1, fall24: 39, fall25: 38 },
                    { country: "Canada", value: -21.95, r: 18, fall24: 82, fall25: 64 },
                    { country: "Chile", value: 5.26, r: 1, fall24: 19, fall25: 20 },
                    { country: "China", value: 3.8, r: 64, fall24: 1682, fall25: 1746 },
                    { country: "Colombia", value: -14.29, r: 5, fall24: 35, fall25: 30 },
                    { country: "Denmark", value: -9.09, r: 2, fall24: 22, fall25: 20 },
                    { country: "Egypt", value: -8.82, r: 3, fall24: 34, fall25: 31 },
                    { country: "El Salvador", value: 7.14, r: 1, fall24: 14, fall25: 15 },
                    { country: "Ethiopia", value: 0.0, r: 0, fall24: 30, fall25: 30 },
                    { country: "France", value: -44.0, r: 11, fall24: 25, fall25: 14 },
                    { country: "Germany", value: -48.15, r: 13, fall24: 27, fall25: 14 },
                    { country: "Ghana", value: -3.06, r: 3, fall24: 98, fall25: 95 },
                    { country: "Greece", value: -27.78, r: 5, fall24: 18, fall25: 13 },
                    { country: "Hong Kong", value: -39.13, r: 9, fall24: 23, fall25: 14 },
                    { country: "India", value: -25.08, r: 779, fall24: 3106, fall25: 2327 },
                    { country: "Indonesia", value: -36.36, r: 8, fall24: 22, fall25: 14 },
                    { country: "Iran", value: -6.34, r: 9, fall24: 142, fall25: 133 },
                    { country: "Italy", value: -16.0, r: 4, fall24: 25, fall25: 21 },
                    { country: "Japan", value: -32.26, r: 10, fall24: 31, fall25: 21 },
                    { country: "Mexico", value: -18.52, r: 5, fall24: 27, fall25: 22 },
                    { country: "Nepal", value: 5.71, r: 4, fall24: 70, fall25: 74 },
                    { country: "Netherlands", value: -5.26, r: 1, fall24: 19, fall25: 18 },
                    { country: "Nigeria", value: -7.69, r: 18, fall24: 234, fall25: 216 },
                    { country: "Pakistan", value: 23.61, r: 17, fall24: 72, fall25: 89 },
                    { country: "Philippines", value: 23.08, r: 3, fall24: 13, fall25: 10 },
                    { country: "Russia", value: -30.43, r: 7, fall24: 23, fall25: 16 },
                    { country: "Saudi Arabia", value: -1.82, r: 1, fall24: 55, fall25: 54 },
                    { country: "Singapore", value: -40.63, r: 13, fall24: 32, fall25: 19 },
                    { country: "South Korea", value: -3.94, r: 8, fall24: 203, fall25: 195 },
                    { country: "Spain", value: 6.58, r: 5, fall24: 76, fall25: 81 },
                    { country: "Sri Lanka", value: 7.55, r: 4, fall24: 53, fall25: 57 },
                    { country: "Taiwan", value: -15.83, r: 22, fall24: 139, fall25: 117 },
                    { country: "Turkey", value: -6.38, r: 3, fall24: 47, fall25: 44 },
                    { country: "United Kingdom", value: -7.14, r: 3, fall24: 42, fall25: 39 },
                    { country: "Vietnam", value: 18.92, r: 14, fall24: 74, fall25: 88 }
                ];

                // ---------------- DIMENSIONS ----------------
                const container = document.getElementById("bubble-container");
                const width = container.clientWidth;
                const height = container.clientHeight;
                const margin = { top: 40, right: 20, bottom: 40, left: 71 };

                // ---------------- SVG ----------------
                const svg = d3.select("#bubble-container").append("svg").attr("width", width).attr("height", height);

                // ---------------- SCALES ----------------
                const y = d3
                    .scaleLinear()
                    .domain([d3.min(data, (d) => d.value) - 10, d3.max(data, (d) => d.value) + 10])
                    .range([height - margin.bottom, margin.top]);

                const maxR = d3.max(data, (d) => d.r);
                const scaleR = d3.scaleLinear().domain([0, maxR]).range([10, 70]);

                const centerX = width / 2;
                const jitter = 50;

                // ---------------- GUIDING LINES ----------------
                svg.append("g")
                    .attr("class", "guides")
                    .selectAll("line")
                    .data(y.ticks(5))
                    .enter()
                    .append("line")
                    .attr("x1", centerX - 175)
                    .attr("x2", centerX + 200)
                    .attr("y1", (d) => y(d))
                    .attr("y2", (d) => y(d))
                    .attr("stroke", "#ccc")
                    .attr("stroke-width", 1)
                    .attr("stroke-dasharray", "4 4");

                // ---------------- Y-AXIS ----------------
                const yAxisGroup = svg
                    .append("g")
                    .attr("transform", `translate(${margin.left},0)`)
                    .call(
                        d3
                            .axisLeft(y)
                            .tickValues([-40, -20, 0, 20])
                            .tickFormat((d) => d + "%")
                    )
                    .call((g) => g.selectAll(".tick line").remove())
                    .selectAll("text")
                    .style("font-family", "poppins")
                    .style("font-size", "14px")
                    .style("fill", (d) => {
                        if (d > 0) return "#008000"; // green for positive
                        if (d < 0) return "#C71E1D"; // red for negative
                        return "#555"; // gray for zero
                    });
                // Add labels for top and bottom
                svg.append("text")
                    .attr("x", margin.left - 10) // slightly left of axis
                    .attr("y", margin.top - 10) // above top tick
                    .attr("text-anchor", "middle")
                    .style("font-family", "poppins")
                    .style("font-size", "14px")
                    .style("fill", "#008000")
                    .style("font-weight", "600")
                    .text("▲ More Students");

                svg.append("text")
                    .attr("x", margin.left - 10) // slightly left of axis
                    .attr("y", height - margin.bottom + 20) // below bottom tick
                    .attr("text-anchor", "middle")
                    .style("font-family", "poppins")
                    .style("font-size", "14px")
                    .style("fill", "#C71E1D")
                    .style("font-weight", "600")
                    .text("▼ Fewer Students");

                // ---------------- INITIAL POSITIONS ----------------
                data.forEach((d) => {
                    d.x = centerX + (Math.random() * 2 - 1) * jitter; // jitter on x
                    d.y = y(d.value); // lock to y position
                });

                // ---------------- DRAW BUBBLES ----------------
                const circles = svg
                    .append("g")
                    .attr("class", "bubbles")
                    .selectAll("circle")
                    .data(data)
                    .enter()
                    .append("circle")
                    .attr("r", (d) => scaleR(d.r))
                    .attr("fill", (d) => (d.value >= 0 ? "#008000" : "#C71E1D"));

                circles.append("title").text((d) => `${d.country}: ${d.value}%`);

                // ---------------- FORCE SIMULATION (NO OVERLAP) ----------------
                const simulation = d3
                    .forceSimulation(data)
                    .force("x", d3.forceX((d) => centerX).strength(0.05))
                    .force("y", d3.forceY((d) => d.y).strength(1)) // lock vertically
                    .force(
                        "collide",
                        d3.forceCollide((d) => scaleR(d.r) + 2)
                    )
                    .on("tick", () => {
                        circles.attr("cx", (d) => d.x).attr("cy", (d) => d.y);
                    });

                // ----------------- ADD TOOLTIPS ---------------------
                const tooltip = d3.select("#tooltip");
                circles
                    .on("mouseover", function (event, d) {
                        tooltip.style("opacity", 1).html(
                            `<h3 style="margin: 0; margin-bottom: 5px; padding: 0; font-size: 18px; font-weight: 700;">${d.country}</h3>
                            Fall 2024: <b>${d.fall24}</b>
                            <br>
                            Fall 2025: <b>${d.fall25}</b>
                            <hr style="margin: 4px;">
                            Change: <b>${d.r}</b>
                            <br>
                            Percent: <b>${d.value}%</b>`
                        );
                        d3.select(this).attr("stroke", "#000").attr("stroke-width", 4);
                    })
                    .on("mousemove", function (event, d) {
                        tooltip
                            .style("left", event.pageX - 110 + "px") // 110px to left
                            .style("top", event.pageY - 25 + "px"); // 25px above
                    })
                    .on("mouseout", function (event, d) {
                        tooltip.style("opacity", 0);
                        d3.select(this).attr("stroke", null);
                    });
            });
        </script>
    </body>
</html>
